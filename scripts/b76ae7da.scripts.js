"use strict";angular.module("typeApp",["ngRoute","ngAnimate","typeApp.filters","typeApp.services","typeApp.directives","typeApp.controllers"]).config(["$routeProvider",function(a){a.when("/view1",{templateUrl:"views/main.html",controller:"IndexController"}),a.when("/view2",{templateUrl:"views/main.html",controller:"MyCtrl2"}),a.otherwise({redirectTo:"/view1"})}]),angular.module("typeApp.controllers",[]).controller("IndexController",["$scope","$http","$sce","scaleDistance","scales","scaleGenerator","typeTable","transformation","pageParser",function(a,b,c,d,e,f,g,h,i){var j=0,k=1,l=2;b.get("data/scales.json").success(function(b){a.scales=b}),"undefined"==typeof a.baseSize&&(a.baseSize=12,a.baseUnit=j,a.scaleType=0,a.scale=1.2,a.showExtra=!0,a.text="My Text Here",a.numHidden=0,a.overlayAbout=!1),a.unitOptions=[{name:"Pixels",value:j},{name:"Ems",value:k},{name:"Percent",value:l}],a.fonts=[{value:1},{value:1.2},{value:1.8},{value:2},{value:2.5},{value:4}];var m=d.setScale(a.fonts,e);a.updateGrid=function(){a.fonts.sort(function(a,b){return a.value-b.value});var b=a.fonts.length,c=a.fonts[b-1].value,i=a.fonts[0].value,j=f.getScale(a.scale,i,c,"em");a.customScale=f.customScale(a.fonts,"em");var k=g.newGrid(a.customScale,j);a.numHidden=g.getHidden(k),"undefined"!=typeof a.grid?(h.transformGrid(a.grid,k),h.updateGrid(a.grid)):a.grid=k,a.ratioDistance=d.setScale(a.fonts,e)},a.isScale=function(b){return b==a.scale},a.updateScale=function(b){a.scale=b,a.updateGrid()},a.isExtra=function(a){return 0==a.left.length},a.to_trusted=function(a){return c.trustAsHtml(a)},a.showHideExtra=function(){a.showExtra?a.showExtra=!1:a.showExtra=!0},a.updateGrid(),a.ratioDistance=m}]).controller("MyCtrl2",[function(){}]),angular.module("typeApp.services",[]).value("version","0.1");var myMod=angular.module("typeApp.services",[]);myMod.factory("scales",function(){var a=[{name:"Golden Ratio",value:1.618,ratio:"<sup>1.618</sup>&frasl;<sub>1</sub>"},{name:"Minor Second",value:1.067,ratio:"<sup>16</sup>&frasl;<sub>15</sub>"},{name:"Major Second",value:1.125,ratio:"<sup>9</sup>&frasl;<sub>8</sub>"},{name:"Minor Third",value:1.2,ratio:"<sup>6</sup>&frasl;<sub>5</sub>"},{name:"Major Third",value:1.25,ratio:"<sup>5</sup>&frasl;<sub>4</sub>"},{name:"Fourth",value:1.333,ratio:"<sup>4</sup>&frasl;<sub>3</sub>"},{name:"Diminished Fifth",value:1.414,ratio:"<sup>&radic;2</sup>&frasl;<sub>1</sub>"},{name:"Perfect Fifth",value:1.5,ratio:"<sup>3</sup>&frasl;<sub>2</sub>"},{name:"Minor Sixth",value:1.6,ratio:"<sup>8</sup>&frasl;<sub>5</sub>"},{name:"Major Sixth",value:1.667,ratio:"<sup>5</sup>&frasl;<sub>3</sub>"},{name:"Minor Seventh",value:1.778,ratio:"<sup>16</sup>&frasl;<sub>9</sub>"},{name:"Major Seventh",value:1.875,ratio:"<sup>15</sup>&frasl;<sub>9</sub>"}];return a}),myMod.factory("scaleDistance",[function(){function a(){}return a.prototype.distance=function(a,b){},a.prototype.setScale=function(a){},a.prototype.order=function(){},a.prototype.log=function(){},a.prototype.setScale=function(a,b){this.ratioDistance={};for(var c=b.length,d=[],e=0;c>e;e++){var f=this.getScaleDistance(b[e],a);d.push({id:e,name:b[e].name,value:b[e].value,ratio:b[e].ratio,distance:f})}return d=this.order(d)},a.prototype.distance=function(a,b,c){var d=this.log(b.value/c.value,a),e=d%1;return e=Math.abs(e),e>.5&&(e=1-e),e=Math.round(1e4*e)/1e4},a.prototype.getScaleDistance=function(a,b){for(var c=b.length,d=0,e=0;c>e;e++)if("undefined"!=typeof b[e+1])var d=d+this.distance(a.value,b[e],b[e+1]);return d},a.prototype.order=function(a){a.sort(function(a,b){return a.distance-b.distance});for(var b=a.length,c=0;b>c;c++)a[c].order=c+1;return a},a.prototype.log=function(a,b){return Math.log(a)/Math.log(b)},new a}]),myMod.factory("scaleGenerator",[function(){function a(){}function b(){}return a.family="Open sans",a.size=12,a.text="My Default Text",a.unit="px",b.prototype.getScale=function(b,c,d,e){for(var f=[];d>c/b&&0!=c;){var g=new a;g.size=Math.round(1e3*c)/1e3,g.unit=e,g.text="Hello",c*=b,f.push(g)}return f},b.prototype.customScale=function(b,c){for(var d=[],e=b.length,f=0;e>f;f++){var g=new a;g.size=b[f].value,g.unit=c,d.push(g)}return d},new b}]),myMod.factory("typeTable",[function(){function a(){}function b(){}function c(a,b,c){var d=b-(b-a)/2;return d>c}return a.prototype.setRight=function(a){},a.prototype.setLeft=function(a){},b.prototype.left,b.prototype.right,a.prototype.newGrid=function(a,b){var c=this.setRight(b);return c=this.setLeft(a,c)},a.prototype.setRight=function(a){for(var c=a.length,d=[],e=0;c>e;e++){var f=new b;f.left=[],f.right=a[e],d.push(f)}return d},a.prototype.setLeft=function(a,b){a.sort(function(a,b){return a.size-b.size});for(var d=a.length,e=1,f=0;d>f;f++){for(;b[e].right.size<a[f].size;)e++;var g=b[e].right.size,h=b[e-1].right.size;c(h,g,a[f].size)?b[e-1].left.push(a[f]):b[e].left.push(a[f])}return b},a.prototype.getHidden=function(a){for(var b=a.length,c=0,d=0;b>d;d++)a[d].left.length>1&&(c+=a[d].left.length-1);return c},new a}]),myMod.factory("transformation",[function(){function a(){}function b(a){for(var b=a.length,c=0;b>c;c++)a[c].targetLeft=[],a[c].targetRight={};return a}return a.prototype.transformGrid=function(a,b){return this.setTargets(a,b),this.removeExtra(a,b),a},a.prototype.removeExtra=function(a,b){var c=b.length,d=a.length;return d>c&&a.splice(c,Number.MAX_VALUE),a},a.prototype.setTargets=function(a,c){a=b(a);for(var d=c.length,e=0;d>e;e++){var f=c[e].right;e>=a.length&&a.push({left:[],right:null}),a[e].targetRight=f,c[e].left.length>0&&(a[e].targetLeft=c[e].left)}return a},a.prototype.updateGrid=function(a){for(var b=a.length,c=0;b>c;c++)"undefined"!=typeof a[c].targetLeft?a[c].left=a[c].targetLeft:a[c].left.length=0,a[c].right=a[c].targetRight;return a},new a}]),myMod.factory("pageParser",["$http",function(a){function b(){}return b.prototype.getFonts=function(){},new b}]),angular.module("typeApp.filters",[]).filter("interpolate",["version",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}]);var myApp=angular.module("typeApp.directives",[]);myApp.directive("appVersion",["version",function(a){return function(b,c,d){c.text(a)}}]),myApp.directive("rowTransform",[function(){return{link:function(a,b,c){c.$observe("size",function(a){var c="em",d=a+c;$(b).animate({fontSize:d},500,function(){})})}}}]),myApp.directive("overlay",function(){return{link:function(a,b,c){b.bind("click",function(){var a=c.overlay,b=$("#"+a);$(b).toggle()})}}}),typeApp.animation(".grid-animation",function(){return{enter:function(a,b){jQuery(a).css({position:"relative",left:-10,opacity:0}),jQuery(a).animate({left:0,opacity:1},b)},leave:function(a,b){jQuery(a).css({position:"relative",left:0,opacity:1}),jQuery(a).animate({left:-10,opacity:0},b)},move:function(a,b){jQuery(a).css({opacity:.5}),jQuery(a).animate({opacity:1},b)}}});